<h1>Merchant Invoices Show Page</h1>

<p>Invoice #<%= @invoice.id %></p>

<p>Status: <%= @invoice.status %></p>

<p>Created on: <%= @invoice.formatted_date %></p>
<p>Total Revenue: <%= number_to_currency(@merchant.invoice_revenue(@invoice.id) / 100.00) %>
<p>Customer: <%= @invoice.customer.first_name %> <%= @invoice.customer.last_name %></p>

<% @merchant.items_for_this_invoice(@invoice.id).each do |invoice_item| %>
  <div id="invoice_item_<%= invoice_item.id %>">
    <p>Name: <%= invoice_item.item.name %>
    <p>Quantity: <%= invoice_item.quantity %></p>
    <p>Unit Price: <%= number_to_currency(invoice_item.unit_price / 100.00) %></p>
    <%= form_with model: [@merchant, invoice_item], method: :patch, local: true do |form| %>
      <%= form.label :status, 'Status:' %>
      <%= form.select :status, ['pending', 'packaged', 'shipped'] %>
      <%= form.submit 'Update Item Status' %>
    <% end %>
  </div>
<% end %>

